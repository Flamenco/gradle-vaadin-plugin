apply plugin: 'groovy'

repositories{
	mavenCentral()
}

configurations {
    deployerJars
}

dependencies {
    compile gradleApi()
    groovy localGroovy()
    compile group:'com.google.gwt',	name:'gwt-dev', version:'2.3.0'
    deployerJars "org.apache.maven.wagon:wagon-ftp:1.0-beta-2"
}

apply plugin: 'maven'

group = "fi.jasoft.plugin"
version = "0.0.2"
archivesBaseName = 'VaadinPlugin'

uploadArchives {
    repositories.mavenDeployer {
        def repo = hasProperty('PLUGIN_MAVEN_REPOSITORY') ? PLUGIN_MAVEN_REPOSITORY : ''
        def user = hasProperty('PLUGIN_MAVEN_REPOSITORY_USER') ? PLUGIN_MAVEN_REPOSITORY_USER : ''
        def password = hasProperty('PLUGIN_MAVEN_REPOSITORY_PASSWORD') ? PLUGIN_MAVEN_REPOSITORY_PASSWORD : ''

        name = 'sshDeployer' 
        configuration = configurations.deployerJars
        repository(url: repo) {
            authentication(userName: user, password: password)
        }
	    pom.project {
	            licenses {
	                license {
	                    name 'The Apache Software License, Version 2.0'
	                    url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
	                    distribution 'repo'
	                }
	            }
	    }

	    pom.scopeMappings.mappings.remove(configurations.compile)
    }

    repositories
}

// Use wrapper
task wrapper(type: Wrapper) { gradleVersion = '1.1' }